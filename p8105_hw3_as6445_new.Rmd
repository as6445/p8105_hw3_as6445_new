---
title: "p8105_hw3_as6445"
author: "Ayako Sekiya"
date: "2022-10-07"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r library}
library(tidyverse)
library(ggridges)
library(p8105.datasets)
data("instacart")
data("ny_noaa")
```

## Problem 1

There are `r nrow(instacart)` observations and `r ncol(instacart)` columns in the Accel data. The variables included are as following: `r colnames(instacart)`.  


## Problem 2

```{r tidy accel}
accel = 
  read_csv(file = "./data/accel_data.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    activity_1:activity_1440, 
    names_to = "activity",
    values_to = "activity_count") %>% 
  mutate(day_type= ifelse(day=='Saturday','Weekend',
                   ifelse(day=='Sunday','Weekend','Weekday')))
      
```
There are `r nrow(accel)` observations and `r ncol(accel)` columns in the Accel data. The variables included are as following: `r colnames(accel)`.  
```{r analysis}
accel_analysis = accel %>% 
  group_by(day_type) %>% 
  summarize(sum_totalactivity = sum(activity_count))
```

```{r aggregate}
accel_24 = accel %>% 
  group_by(day) %>% 
  ggplot(aes(x = , y = tmin, color = name)) + 
  geom_violin(aes(fill = name), alpha = .5) + 
  stat_summary(fun = "median", color = "blue")
  theme(legend.position = "none")
```
  separate(activity, into=c("activity", "minute"), sep= "_") %>% 
  select (-activity) %>% 
  mutate
## Problem 3

We will first tidy the dataset!

```{r tidy noaa}
ny_noaa <- ny_noaa %>% 
  janitor::clean_names() %>%
  separate(date, into=c("year", "month", "day"), sep= "-") %>% 
  mutate(tmax = as.numeric(tmax, na.rm = TRUE)/10,
         tmin = as.numeric(tmin, na.rm = TRUE)/10,
        prcp = as.numeric(prcp, na.rm = TRUE)/10) %>% 
  mutate(month= as.character(month.name[month]))
```
   
For snowfall, what are the most commonly observed values? Why?

To answer this question, we will use `group_by` and `summarize`. 

```{r snowfall}
snow <- ny_noaa %>% 
  group_by(snow) %>% 
  summarize(n_obs = n())
```

The most commonly observed values is 0 based on this output which would make sense because there should be more days that it does not snow in NY than days that snows. 

```{r two-panel avg max temp}
avg_jan_july_p = 
  ny_noaa %>% 
  select(id, month, year, tmax, tmin) %>% 
  filter(month=='January'| month=='July') %>%
  group_by(id, month, year) %>% 
  summarize(mean_tmax = mean(tmax)) %>%
  ggplot(aes(x = year, y = mean_tmax, color = name)) + 
  geom_point(alpha = .5) +
  theme(legend.position = "none")
```

```{r two-panel tmin and max}
tmax_tmin_p = 
  ny_noaa %>% 
  ggplot(aes(x = tmax, y = tmin, color = name)) + 
  geom_hex() 
```

Make a plot showing the distribution of snowfall values greater than 0 and less than 100 separately by year.
```{r}
snow_plot<- ny_noaa %>% 
  filter(snow > 0 & snow < 100) %>% 
  mutate(year = as.character(year)) %>% 
  ggplot(aes(x = year, y = snow, fill = year)) + 
  geom_violin(alpha = 0.5 )
```

